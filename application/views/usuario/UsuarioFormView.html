<loading></loading>

<div ng-hide="loading" class="ng-hide cartao"> 
 	<table class="table table-striped table-bordered table-responsive">
	 	<thead>
	      	<tr>
	      		<th class="col-xs-2 col-sm-1">
	      			<label style="cursor: pointer;" ng-click="sortField=id; reverse= !reverse;">C&oacute;d</label>
	      			<span ng-show="sortField=='id' && !reverse" class="glyphicon glyphicon-sort-by-attributes sortIcon" aria-hidden="true"></span>
	      			<span ng-show="sortField=='id' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt sortIcon" aria-hidden="true"></span>
	      		</th>
	       	 	<th class="col-xs-9 col-sm-2 col-lg-2">
	        		<label style="cursor: pointer;" ng-click="sortField='nome'; reverse= !reverse;">Nome</label>
	        		<span ng-show="sortField=='nome' && !reverse" class="glyphicon glyphicon-sort-by-attributes sortIcon" aria-hidden="true"></span>
	      			<span ng-show="sortField=='nome' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt sortIcon" aria-hidden="true"></span>
	        	</th>
	        	<th class="col-sm-2 col-lg-1 hidden-xs">
	        		<label style="cursor: pointer;" ng-click="sortField='login'; reverse= !reverse;">Login</label>
	        		<span ng-show="sortField=='login' && !reverse" class="glyphicon glyphicon-sort-by-attributes sortIcon" aria-hidden="true"></span>
	      			<span ng-show="sortField=='login' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt sortIcon" aria-hidden="true"></span>
	        	</th>
	        	<th class="col-sm-3 col-lg-2 hidden-xs">
	        		<label style="cursor: pointer;" ng-click="sortField='cargo'; reverse= !reverse;">Cargo</label>
	        		<span ng-show="sortField=='email' && !reverse" class="glyphicon glyphicon-sort-by-attributes sortIcon" aria-hidden="true"></span>
	      			<span ng-show="sortField=='email' && reverse" class="glyphicon glyphicon-sort-by-attributes-alt sortIcon" aria-hidden="true"></span>
	        	</th>
	        	<th class="col-sm-1 hidden-xs text-center"><label>Ativo</label></th>
	        	<th class="col-xs-1 visible-xs">
					<button type="button" class="btn btn-default" aria-label="Cadastrar" ng-click="formulario()">
	       				<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
	       			</button>
	       		</th>
	        	<th class="col-md-2 hidden-xs text-center">
	        		<button type="button" class="btn btn-default" aria-label="Cadastrar" ng-click="formulario()">
	       				<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
	       			</button>
	        	</th>
	      	</tr>
	   	</thead>
	    <tbody>
	      	<tr dir-paginate-start="usuario in usuarios | orderBy:sortField:reverse | itemsPerPage: 10">
	       		<td>{{usuario.id}}</td>
	       		<td>{{usuario.nome}}</td>
	       		<td class="hidden-xs">{{usuario.login}}</td>
	       		<td class="hidden-xs">{{usuario.cargo}}</td>
	       		<td class="hidden-xs text-center"><span ng-bind-html='usuario.ativo | boolIcon'></span></td>
	       		<td class="hidden-xs text-center">
	       			<button type="button" class="btn btn-default" aria-label="Editar" ng-click="formulario(usuario)">
	       				<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
	       			</button>
	       			<button type="button" class="btn btn-default" aria-label="Alterar status" ng-click="alterarStatusUsuario(usuario)">
				    	<span ng-show="usuario.ativo == 1" class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
				       	<span ng-show="usuario.ativo == 0" class="glyphicon glyphicon-ok" aria-hidden="true"></span>
	       			</button>
	       			
	       			<button type="button" class="hidden-xs btn btn-default" aria-label="Detalhes" data-toggle="collapse" 
	       				data-target="#detalhes_sm{{usuario.id}}" class="accordion-toggle">
	       				<span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>
	       			</button>
	       			
	       		</td>
	       		<td class="text-center col-xs-1 visible-xs">
	       			<button type="button" class="btn btn-default" aria-label="Detalhes" data-toggle="collapse" 
	       				data-target="#detalhes{{usuario.id}}" class="accordion-toggle">
	       				<span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>
	       			</button>
	       		</td>      
	      	</tr>
	      	
	      	<tr class="hidden-xs">
            	<td colspan="8" class="hiddenRow">
            		<div id="detalhes_sm{{usuario.id}}" class="accordian-body collapse">
            			<table class="table table-bordered">
            				<tr>
	            				<td class="col-xs-2"><label>Data cadastro: </label></td>
	            				<td>{{usuario.data_cadastro | dateFromMySql | date:'dd/MM/yyyy'}}</td>
            				</tr>
            				<tr>
	            				<td class="col-xs-2"><label>&Uacute;ltimo acesso: </label></td>
	            				<td>{{usuario.data_ultimo_login | dateFromMySql | date:'dd/MM/yyyy HH:mm:ss'}}</td>
            				</tr>
            				<tr>
	            				<td class="col-xs-2"><label>Email: </label></td>
	            				<td>{{usuario.email}}</td>
            				</tr>
            				<tr>
	            				<td class="col-xs-2"><label>Centro de Custo: </label></td>
	            				<td>{{usuario.centrocusto}}</td>
            				</tr>
            			</table>
            		</div>
            	</td>
        	</tr>
        	
	      	<tr class="visible-xs">
            	<td colspan="3" class="hiddenRow">
            		<div id="detalhes{{usuario.id}}" class="accordian-body collapse">
            			<table  class="table table-bordered">
            				<body>
	            				<tr>
		            				<td class="col-xs-2"><label>Email: </label></td>
		            				<td>{{usuario.email}}</td>
	            				</tr>
	            				<tr>
		            				<td class="col-xs-2"><label>Login: </label></td>
		            				<td>{{usuario.login}}</td>
	            				</tr>
	            				<tr>
		            				<td class="col-xs-2"><label>Data cadastro: </label></td>
		            				<td>{{usuario.data_cadastro | dateFromMySql | date:'dd/MM/yyyy'}}</td>
	            				</tr>
	            				<tr>
		            				<td class="col-xs-2"><label>Ativo: </label></td>
		            				<td><span ng-bind-html='usuario.ativo | boolIcon'></td>
	            				</tr>
	            				<tr>
		            				<td class="col-xs-2"><label>&Uacute;ltimo acesso: </label></td>
		            				<td>{{usuario.data_ultimo_login | dateFromMySql | date:'dd/MM/yyyy HH:MM:ss'}}</td>
	            				</tr>
	            				<tr>
		            				<td class="col-xs-2"><label>Cargo: </label></td>
		            				<td>{{usuario.cargo}}</td>
	            				</tr>
	            				<tr>
		            				<td class="col-xs-2"><label>Centro de custo: </label></td>
		            				<td>{{usuario.centrocusto}}</td>
	            				</tr>
	            				<tr>
		            				<td colspan="2" class="text-right">
			            				<button type="button" class="btn btn-default" aria-label="Editar" ng-click="formulario(usuario)">
						       				<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
						       			</button>
						       			<button type="button" class="btn btn-default" aria-label="Alterar status" ng-click="alterarStatusUsuario(usuario)">
						       				<span ng-show="usuario.ativo == 1" class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
						       				<span ng-show="usuario.ativo == 0" class="glyphicon glyphicon-ok" aria-hidden="true"></span>
						       			</button>
		            				</td>
	            				</tr>
	            			</body>
            			</table>
            		</div>
            	</td>
        	</tr>
        	<tr dir-paginate-end></tr>
	    </tbody>
	</table>
	<dir-pagination-controls></dir-pagination-controls>
</div>

<div class="modal fade" id="modal_usuario" role="dialog">
	<div class="modal-dialog">
 		<div class="modal-content">
    		
    		<div class="modal-header">
       		 	<button type="button" class="close" data-dismiss="modal">&times;</button>
       			<h4 class="modal-title">Cadastrar Usu&aacute;rio</h4>
      		</div>
      		
      		<div class="modal-body">
        		<form name="formUsuario" novalidate>
			    	<div class="form-group" show-errors>
				        <label class="control-label">Email</label>
				        <input type="email" class="form-control" name="email" ng-model="usuario.email" required placeholder="Email" />
			      		<p class="help-block" ng-if="formUsuario.email.$error.email">Email inv&aacute;lido</p>
			      	</div>
			      	
			        <div class="form-group" show-errors>
			            <label class="control-label">Nome</label>
			            <input type="text" class="form-control" name="nome" id="inputNome" ng-model="usuario.nome" required placeholder="Nome">
			        </div>
			        
			        <div class="form-group" show-errors>
			            <label class="control-label">Login</label>
			            <input type="text" class="form-control" name="login" id="inputLogin" ng-model="usuario.login" required placeholder="Login" ngMinlength="5">
			            <p class="help-block" ng-if="formUsuario.senha.$error.minlength ">Login deve ter no m&iacute;nimo 5 caracteres</p>
			        </div>
			        
			        <div class="form-group" show-errors>
			            <label class="control-label">Senha</label>
			            <input type="password" class="form-control" name="senha" id="inputSenha" ng-model="usuario.senha" required placeholder="Senha" ngMinlength="8">
			            <p class="help-block" ng-if="formUsuario.senha.$error.minlength ">Senha deve ter no m&iacute;nimo 8 caracteres</p>
			        </div>
			        
			        <div class="form-group" show-errors>
			            <label class="control-label">Centro de custo</label>
			            <input type="text" class="form-control" name="centrocusto" id="inputcc" ng-model="usuario.centrocusto" placeholder="Centro de custo">
			        </div>
			        
			        <div class="form-group" show-errors>
			            <label class="control-label">Cargo</label>
			            <input type="text" class="form-control" name="cargo" id="inputcargo" ng-model="usuario.cargo" placeholder="Cargo">
			        </div>
        		</form>
      		</div>
      		
      		<div class="modal-footer">
      			<button class="btn btn-primary" ng-disabled="formUsuario.$invalid" ng-click="salvar()">Salvar</button>
      		</div>
    	</div>
  	</div>
</div>
